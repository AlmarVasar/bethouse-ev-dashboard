<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BetHouse EV Calculator</title>

    <style>
        body {
            background:#0f1116;
            color:#eaeaf0;
            font-family: Inter, system-ui, sans-serif;
            display:flex;
            justify-content:center;
            align-items:center;
            min-height:100vh;
        }
        .card {
            width:420px;
            background:#161922;
            padding:24px;
            border-radius:16px;
        }
        label { font-size:12px; color:#9aa0b4; display:block; margin-top:12px; }
        input, select {
            width:100%;
            padding:10px;
            border-radius:10px;
            border:1px solid #2a2e3a;
            background:#0f1116;
            color:#fff;
        }
        button {
            margin-top:18px;
            width:100%;
            padding:12px;
            border-radius:12px;
            border:none;
            background:#5c7cfa;
            color:#fff;
            font-weight:600;
            cursor:pointer;
        }
        .result {
            margin-top:20px;
            padding:16px;
            border-radius:12px;
            background:#0f1116;
            display:none;
        }
        .row {
            display:flex;
            justify-content:space-between;
            margin-bottom:8px;
            font-size:13px;
        }
        .positive { color:#4ade80; }
        .negative { color:#f87171; }
    </style>
</head>

<body>

<div class="card">
    <h2>BetHouse EV Calculator</h2>

    <label>Sharp Over Odds</label>
    <input id="sharpOver" type="number" step="0.01">

    <label>Sharp Under Odds</label>
    <input id="sharpUnder" type="number" step="0.01">

    <label>Soft Odds</label>
    <input id="softOdds" type="number" step="0.01">

    <label>Bankroll</label>
    <input id="bankroll" type="number" value="1000">

    <label>Market</label>
    <select id="market">
        <option value="FT">Full Time</option>
        <option value="1H">1st Half</option>
    </select>

    <button onclick="calculate()">Calculate</button>

    <div id="result" class="result">
        <div class="row"><span>FAIR RANGE</span><span id="fairRange"></span></div>
        <div class="row"><span>EV</span><span id="evValue"></span></div>
        <div class="row"><span>STAKE</span><span id="stakeValue"></span></div>
        <div class="row"><span>DECISION</span><span id="decision"></span></div>
    </div>
</div>

<script>
    function calculate() {

        const so = parseFloat(sharpOver.value);
        const su = parseFloat(sharpUnder.value);
        const soft = parseFloat(softOdds.value);
        const bankrollVal = parseFloat(bankroll.value);
        const marketVal = market.value;

        if (!so || !su || !soft || !bankrollVal) return;

        // ---- FAIR (NO-VIG)
        const pOverRaw = 1 / so;
        const pUnderRaw = 1 / su;
        const vigSum = pOverRaw + pUnderRaw;

        const pOverFair = pOverRaw / vigSum;
        const pUnderFair = pUnderRaw / vigSum;

        const fairOver = 1 / pOverFair;
        const fairUnder = 1 / pUnderFair;

        const fairLow = Math.min(fairOver, fairUnder);
        const fairHigh = Math.max(fairOver, fairUnder);

        // Choose closest fair for EV
        const fairSelected =
            Math.abs(soft - fairOver) < Math.abs(soft - fairUnder)
                ? fairOver
                : fairUnder;

        // ---- EV
        const ev = (soft / fairSelected) - 1;

        // EV AUDIT
        if ((soft > fairSelected && ev <= 0) ||
            (soft < fairSelected && ev >= 0)) {
            alert("EV AUDIT FAILED");
            return;
        }

        // ---- STAKE
        let stake = 0;
        if (ev > 0) {
            const cap = marketVal === "1H" ? 0.013 : 0.022;
            stake = bankrollVal * cap;
        }

        // ---- UI
        result.style.display = "block";
        fairRange.textContent = `${fairLow.toFixed(2)} – ${fairHigh.toFixed(2)}`;
        evValue.textContent = (ev > 0 ? "+" : "") + (ev * 100).toFixed(2) + "%";
        evValue.className = ev > 0 ? "positive" : "negative";
        stakeValue.textContent = "€" + stake.toFixed(2);
        decision.textContent = ev > 0 ? "BET" : "NO BET";
        decision.className = ev > 0 ? "positive" : "negative";
    }
</script>

</body>
</html>
