<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BetHouse EV Engine</title>

    <style>
        :root {
            --bg:#0b0e14;
            --card:#121725;
            --stroke:#23283b;
            --text:#e9ecf1;
            --muted:#8f96b3;
            --blue:#5c7cfa;
            --green:#4ade80;
            --red:#f87171;
        }

        * { box-sizing:border-box }

        body {
            background:
                    radial-gradient(900px at 10% -20%, #1c2240 0%, transparent 60%),
                    radial-gradient(900px at 90% 120%, #1a3a5f 0%, transparent 55%),
                    var(--bg);
            color:var(--text);
            font-family:Inter, system-ui, sans-serif;
            display:flex;
            justify-content:center;
            align-items:flex-start;
            min-height:100vh;
            padding-top:40px;
        }

        .card {
            width:420px;
            background:
                    linear-gradient(180deg, rgba(255,255,255,.05), transparent),
                    var(--card);
            padding:28px;
            border-radius:22px;
            border:1px solid rgba(255,255,255,.06);
            box-shadow:0 40px 120px rgba(0,0,0,.8);
        }

        h2 {
            text-align:center;
            font-size:18px;
            margin-bottom:22px;
        }

        label {
            font-size:11px;
            color:var(--muted);
            text-transform:uppercase;
            margin-top:16px;
            display:block;
        }

        input, select {
            width:100%;
            padding:12px 14px;
            margin-top:6px;
            border-radius:14px;
            border:1px solid var(--stroke);
            background:#0d101a;
            color:white;
            font-size:14px;
        }

        input::placeholder {
            color:#6f7694;
        }


        input:focus, select:focus {
            outline:none;
            border-color:var(--blue);
            box-shadow:0 0 0 4px rgba(92,124,250,.18);
        }

        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance:auto;
            filter:invert(1);
        }

        button {
            margin-top:26px;
            width:100%;
            padding:14px;
            border-radius:16px;
            border:none;
            font-weight:600;
            background:linear-gradient(135deg,#5c7cfa,#4dabf7);
            color:white;
            cursor:pointer;
        }

        .result {
            margin-top:26px;
            padding:20px;
            border-radius:18px;
            background:#0d101a;
            border:1px solid var(--stroke);
            display:none;
        }

        .row {
            display:flex;
            justify-content:space-between;
            margin-bottom:12px;
            font-size:13px;
        }

        .divider {
            height:1px;
            background:#24283a;
            margin:14px 0;
        }

        .positive { color:var(--green); font-weight:600; }
        .negative { color:var(--red); font-weight:600; }
    </style>
</head>

<body>

<div class="card">
    <h2>BetHouse EV Engine</h2>

    <label>Sharp Over Odds</label>
    <input id="sharpOver" type="number" step="0.01" placeholder="e.g. 1.92">

    <label>Sharp Under Odds</label>
    <input id="sharpUnder" type="number" step="0.01" placeholder="e.g. 1.95">

    <label>Soft Odds</label>
    <input id="softOdds" type="number" step="0.01" placeholder="e.g. 2.05">

    <label>Bankroll (€)</label>
    <input id="bankroll" type="number" placeholder="e.g. 1000">

    <label>Market</label>
    <select id="market">
        <option value="FULL_TIME">Full Time (90 min)</option>
        <option value="FIRST_HALF">1st Half (45 min)</option>
    </select>

    <button onclick="calculateEV()">Calculate EV</button>

    <div id="result" class="result">
        <div class="row"><span>FAIR RANGE</span><span id="fairRange">-</span></div>
        <div class="divider"></div>
        <div class="row"><span>EV</span><span id="evPercent">-</span></div>
        <div class="row" id="stakeRow"><span>STAKE</span><span id="stakeAmount"></span></div>
        <div class="divider"></div>
        <div class="row"><span>DECISION</span><span id="decisionText">-</span></div>
    </div>
</div>

<script>
    function calculateEV() {

        const sharpOver = parseFloat(document.getElementById('sharpOver').value);
        const sharpUnder = parseFloat(document.getElementById('sharpUnder').value);
        const soft = parseFloat(document.getElementById('softOdds').value);
        const bankroll = parseFloat(document.getElementById('bankroll').value);

        const marketEl = document.getElementById('market');
        const market = marketEl.value;

        if ([sharpOver, sharpUnder, soft, bankroll].some(isNaN)) return;

        const pO = 1 / sharpOver;
        const pU = 1 / sharpUnder;
        const vig = pO + pU;

        const fairO = 1 / (pO / vig);
        const fairU = 1 / (pU / vig);

        const fairLow = Math.min(fairO, fairU);
        const fairHigh = Math.max(fairO, fairU);

        // decide side ONCE, independent of soft distance
        const bettingOver = soft > fairO;

// fair probability from sharp market
        const fairProb = bettingOver ? (pO / vig) : (pU / vig);

// correct EV formula
        const ev = (soft * fairProb) - 1;
        const evPct = ev * 100;
        const positive = ev >= 0.02;


        document.getElementById('fairRange').textContent =
            `${fairLow.toFixed(2)} – ${fairHigh.toFixed(2)}`;

        const evSpan = document.getElementById('evPercent');
        evSpan.textContent = (ev >= 0 ? '+' : '') + evPct.toFixed(2) + '%';
        evSpan.className = positive ? 'positive' : 'negative';

        const stakeRow = document.getElementById('stakeRow');
        if (positive) {
            const factor = market === 'FIRST_HALF' ? 0.5 : 1;
            let stake = bankroll * ev * 0.3 * factor;
            stake = Math.max(stake, bankroll * 0.003);
            stakeRow.style.display = 'flex';
            document.getElementById('stakeAmount').textContent = '€' + stake.toFixed(2);
        } else {
            stakeRow.style.display = 'none';
        }

        const decision = document.getElementById('decisionText');
        decision.textContent = positive ? 'BET APPROVED' : 'NO BET';
        decision.className = positive ? 'positive' : 'negative';

        document.getElementById('result').style.display = 'block';
    }
</script>

</body>
</html>
