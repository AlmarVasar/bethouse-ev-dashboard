<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BetHouse EV Engine</title>

    <style>
        body {
            background:radial-gradient(circle at top, #151924, #0f1116);
            color:#eaeaf0;
            font-family: Inter, system-ui, sans-serif;
            display:flex;
            justify-content:center;
            align-items:center;
            min-height:100vh;
            padding:20px;
        }

        .card {
            width:420px;
            background:linear-gradient(180deg,#1a1f2e,#141824);
            padding:26px;
            border-radius:18px;
            box-shadow:0 30px 80px rgba(0,0,0,0.6);
        }

        h2 {
            font-size:18px;
            margin-bottom:18px;
            color:#b6bdd6;
            text-align:center;
        }

        label {
            font-size:11px;
            text-transform:uppercase;
            color:#8f96b3;
            display:block;
            margin-top:14px;
        }

        input, select {
            width:100%;
            padding:11px 12px;
            border-radius:12px;
            border:1px solid #2a2f42;
            background:#0f1116;
            color:#fff;
            font-size:14px;
            box-sizing:border-box;
        }

        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance:auto;
            background:#161922;
            color:#fff;
        }

        input.error {
            border-color:#f87171;
            color:#f87171;
        }

        button {
            margin-top:22px;
            width:100%;
            padding:13px;
            border-radius:14px;
            border:none;
            background:linear-gradient(135deg,#5c7cfa,#4dabf7);
            color:#fff;
            font-weight:600;
            cursor:pointer;
        }

        .result {
            margin-top:22px;
            padding:18px;
            border-radius:14px;
            background:#0f1116;
            border:1px solid #2a2e3a;
            display:none;
        }

        .row {
            display:flex;
            justify-content:space-between;
            margin-bottom:10px;
            font-size:13px;
        }

        .positive { color:#4ade80; font-weight:600; }
        .negative { color:#f87171; font-weight:600; }

        .divider {
            height:1px;
            background:#24283a;
            margin:12px 0;
        }
    </style>
</head>

<body>

<div class="card">
    <h2>BetHouse EV Engine</h2>

    <label>Sharp Over Odds</label>
    <input id="sharpOver" type="number" step="0.01">

    <label>Sharp Under Odds</label>
    <input id="sharpUnder" type="number" step="0.01">

    <label>Soft Odds</label>
    <input id="softOdds" type="number" step="0.01">

    <label>Bankroll (€)</label>
    <input id="bankroll" type="number" value="1000">

    <label>Market</label>
    <select id="market">
        <option value="FULL_TIME">Full Time (90 min)</option>
        <option value="FIRST_HALF">1st Half (45 min)</option>
    </select>

    <button onclick="calculateEV()">Calculate EV</button>

    <div id="result" class="result">
        <div class="row"><span>FAIR RANGE</span><span id="fairRange">-</span></div>
        <div class="divider"></div>
        <div class="row"><span>EV</span><span id="evPercent">-</span></div>
        <div class="row" id="stakeRow"><span>STAKE</span><span id="stakeAmount"></span></div>
        <div class="divider"></div>
        <div class="row"><span>DECISION</span><span id="decisionText">-</span></div>
    </div>
</div>

<script>
    function calculateEV() {

        const sharpOverInput = document.getElementById('sharpOver');
        const sharpUnderInput = document.getElementById('sharpUnder');
        const softInput = document.getElementById('softOdds');
        const bankrollInput = document.getElementById('bankroll');
        const market = document.getElementById('market').value;

        const sharpOver = parseFloat(sharpOverInput.value);
        const sharpUnder = parseFloat(sharpUnderInput.value);
        const soft = parseFloat(softInput.value);
        const bankroll = parseFloat(bankrollInput.value);

        if ([sharpOver, sharpUnder, soft, bankroll].some(v => isNaN(v))) return;

        // NO-VIG FAIR
        const pOver = 1 / sharpOver;
        const pUnder = 1 / sharpUnder;
        const vig = pOver + pUnder;

        const fairOver = 1 / (pOver / vig);
        const fairUnder = 1 / (pUnder / vig);

        const fairLow = Math.min(fairOver, fairUnder);
        const fairHigh = Math.max(fairOver, fairUnder);

        const fairSelected =
            Math.abs(soft - fairOver) < Math.abs(soft - fairUnder)
                ? fairOver
                : fairUnder;

        const ev = (soft / fairSelected) - 1;
        const evPct = ev * 100;

        const evPositive = ev >= 0.03;

        // STAKE (ONLY IF EV ≥ 3%)
        const stakeRow = document.getElementById('stakeRow');
        if (evPositive) {
            const marketFactor = market === 'FIRST_HALF' ? 0.5 : 1;
            let stake = bankroll * ev * 0.3 * marketFactor;
            stake = Math.max(stake, bankroll * 0.003);
            stakeRow.style.display = 'flex';
            stakeAmount.textContent = '€' + stake.toFixed(2);
        } else {
            stakeRow.style.display = 'none';
        }

        fairRange.textContent = `${fairLow.toFixed(2)} – ${fairHigh.toFixed(2)}`;

        evPercent.textContent = (ev >= 0 ? '+' : '') + evPct.toFixed(2) + '%';
        evPercent.className = evPositive ? 'positive' : 'negative';

        decisionText.textContent = evPositive ? 'BET APPROVED' : 'NO BET';
        decisionText.className = evPositive ? 'positive' : 'negative';

        document.getElementById('result').style.display = 'block';
    }
</script>

</body>
</html>
