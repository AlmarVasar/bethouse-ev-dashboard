<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BetHouse EV Engine</title>
    <style>
        body {
            background:#0f1116;
            color:#eaeaf0;
            font-family: Inter, system-ui, sans-serif;
            display:flex;
            justify-content:center;
            align-items:center;
            min-height:100vh;
        }
        .card {
            width:460px;
            background:#161922;
            padding:24px;
            border-radius:16px;
        }
        h2 { font-size:15px; margin:16px 0 10px; color:#9aa0b4; }
        label { font-size:12px; color:#9aa0b4; display:block; margin-top:12px; }
        input, select {
            width:100%;
            padding:10px;
            border-radius:10px;
            border:1px solid #2a2e3a;
            background:#0f1116;
            color:#fff;
        }
        input.error { border-color:#f87171; color:#f87171; }
        button {
            margin-top:18px;
            width:100%;
            padding:12px;
            border-radius:12px;
            border:none;
            background:#5c7cfa;
            color:#fff;
            font-weight:600;
            cursor:pointer;
        }
        .result {
            margin-top:20px;
            padding:16px;
            border-radius:12px;
            background:#0f1116;
            display:none;
        }
        .row { display:flex; justify-content:space-between; margin-bottom:8px; font-size:13px; }
        .positive { color:#4ade80; }
        .negative { color:#f87171; }
    </style>
</head>
<body>

<div class="card">
    <h2>Fair Odds Calculator (NO-VIG)</h2>

    <label>Sharp Over Odds</label>
    <input id="sharpOver" type="number" step="0.01" placeholder="Enter number">
    <label>Sharp Under Odds</label>
    <input id="sharpUnder" type="number" step="0.01" placeholder="Enter number">
    <label>Soft Odds</label>
    <input id="softOdds" type="number" step="0.01" placeholder="Enter number">
    <label>Bankroll</label>
    <input id="fairBankroll" type="number" value="1000" placeholder="Enter number">
    <label>Market</label>
    <select id="fairMarket">
        <option value="FT">Full Time</option>
        <option value="1H">1st Half</option>
    </select>

    <button onclick="calculateNoVig()">Calculate Fair & EV</button>

    <div id="fairResult" class="result">
        <div class="row"><span>FAIR RANGE</span><span id="f_range">-</span></div>
        <div class="row"><span>EV</span><span id="f_ev">-</span></div>
        <div class="row"><span>STAKE</span><span id="f_stake">-</span></div>
        <div class="row"><span>DECISION</span><span id="f_decision">-</span></div>
    </div>

</div>

<script>
    function showPlaceholderError(input) {
        input.value = '';
        input.placeholder = "Please enter a number";
        input.classList.add('error');
    }

    function clearPlaceholder(input) {
        input.classList.remove('error');
    }

    ['sharpOver','sharpUnder','softOdds','fairBankroll'].forEach(id=>{
        const inp=document.getElementById(id);
        inp.addEventListener('focus', ()=>{ clearPlaceholder(inp); });
    });

    function calculateNoVig() {
        const soInput = document.getElementById('sharpOver');
        const suInput = document.getElementById('sharpUnder');
        const softInput = document.getElementById('softOdds');
        const bankrollInput = document.getElementById('fairBankroll');
        const marketVal = document.getElementById('fairMarket').value;

        let hasError = false;
        [soInput,suInput,softInput,bankrollInput].forEach(inp=>{
            if(inp.value.trim()==='' || isNaN(parseFloat(inp.value))){
                showPlaceholderError(inp);
                hasError=true;
            }
        });
        if(hasError) return;

        const so=parseFloat(soInput.value);
        const su=parseFloat(suInput.value);
        const soft=parseFloat(softInput.value);
        const bankroll=parseFloat(bankrollInput.value);

        // NO-VIG FAIR
        const pOver=1/so, pUnder=1/su;
        const vig=pOver+pUnder;
        const fairOver=1/(pOver/vig), fairUnder=1/(pUnder/vig);
        const fairLow=Math.min(fairOver,fairUnder);
        const fairHigh=Math.max(fairOver,fairUnder);

        const fairSelected=Math.abs(soft-fairOver)<Math.abs(soft-fairUnder)?fairOver:fairUnder;

        const ev=(soft/fairSelected)-1;

        if((soft>fairSelected && ev<=0)||(soft<fairSelected && ev>=0)){
            fairResult.style.display='block';
            fairResult.innerHTML='<div class="negative">EV audit failed</div>';
            return;
        }

        const stake = ev>0 ? bankroll*(marketVal==='1H'?0.013:0.022):0;
        const pos = ev>0;

        fairResult.style.display='block';
        f_range.textContent = `${fairLow.toFixed(2)} – ${fairHigh.toFixed(2)}`;
        f_ev.textContent = (pos?'+':'')+(ev*100).toFixed(2)+'%';
        f_ev.className = pos?'positive':'negative';
        f_stake.textContent = '€'+stake.toFixed(2);
        f_decision.textContent = pos?'BET APPROVED':'NO BET';
        f_decision.className = pos?'positive':'negative';
    }
</script>

</body>
</html>
